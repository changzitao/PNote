双亲委派机制时JVM类加载的默认使用的机制，其原理是:当一个类加载器收到类加载任务时，会先交给自己的父加载器去完成，因此最终加载任务都会传递到最顶层的BootstrapClassLoader，只有当父加载器无法完成加载任务时，才会尝试自己来加载。
类加载器分为：
启动类加载器。（核心的类库(java.lang.\*等),JVM_HOME/lib目录下的，构造ExtClassLoader和APPClassLoader。）
扩展类加载器。(主要负责加载jre/lib/ext目录下的一些扩展的jar)
系统类加载器。(主要负责加载应用程序的主函数类)
自定义类加载器。
缺陷：
举例，
java.sql.Driver，定义在java.sql包中，包所在的位置是：jdk\jre\lib\rt.jar中，java.sql包中还提供了其它相应的类和接口比如管理驱动的类:DriverManager类，很明显java.sql包是由BootstrapClassloader加载器加载的；而接口的实现类com.mysql.jdbc.Driver是由第三方实现的类库，由AppClassLoader加载器进行加载的。

在传统方式中我们需要使用Class.forName("com.mysql.jdbc.Driver").newInstance();来加载驱动（在应用程序中加载的属于系统类加载器）。

而JDBC 4.0引入了一种基于SPI的机制 ， 在实现类的jar包的META-INF/services目录下创建一个以“接口全限定名”为命名的文件，内容为实现类的全限定名；而ServiceLoder会自动扫描目录下的配置文件，找到对应的类，之后将类加载到jvm中。

这样带来的好处：
1. **解耦合**: 应用程序开发者可以通过 JDBC API 编写数据库交互代码，而不需要关心底层的数据库驱动实现。这样做可以使得应用程序与特定数据库驱动的实现解耦，提高了代码的可移植性。
    
2. **服务的动态发现**: SPI 机制允许 JDBC 驱动程序被动态地发现和加载，而不需要应用程序显式地指定它们。这意味着开发者可以仅通过更改连接字符串和类路径上的驱动程序，就能够切换到不同的数据库产品。
    
3. **易于扩展**: 新的数据库驱动可以轻松地添加到系统中，而不需要修改现有的应用程序代码。只要新的驱动遵循 JDBC 规范，并且在其 JAR 文件中提供了正确的 SPI 配置，它就可以被 `DriverManager` 自动识别和使用。
    
4. **标准化**: SPI 为数据库驱动提供商定义了一个标准的方式来提供驱动实现，这有助于保持 JDBC 生态系统的一致性和互操作性。
    
5. **自动加载**: 在 Java 的服务加载机制下，数据库驱动可以在运行时被自动加载，而不需要应用程序显式执行类加载或初始化驱动的代码。这简化了驱动的管理和应用程序的配置。
    
6. **无需代码变更**: 应用程序可以在不改变代码的情况下，通过更换数据库驱动来连接不同的数据库，这对于多数据库支持和产品的快速迭代是非常有利的。
    
7. **模块化**: SPI 促进了模块化编程，数据库驱动可以作为独立模块被开发和部署，而应用程序可以在不关心这些模块内部实现的情况下使用它们。
    
8. **更好的服务管理**: 使用 SPI 机制意味着 Java 平台本身可以更好地管理服务的加载和卸载，有助于提高应用程序的稳定性和性能。
